# CSV ファイル名の定義（統一ルール）

**作成日**: 2026年2月5日  
**更新**: 一覧は「機能_日付」、単一は「機能_名称_日付」に統一。名称は #T0000 などの表示名を使用し、複雑な英数字IDは表示しない。

---

## 統一ルール

| 出力種別 | 形式 | 例 |
|----------|------|-----|
| **一覧**（表示中を一括） | `機能_日付` | `仕入履歴_2026-02-05.csv` |
| **単一**（モーダル・1件の詳細） | `機能_名称_日付` | `仕入履歴_#P0000_2026-02-05.csv` |

- **名称**には必ず表示名（#P0000, #L0001, #T0127, 発注名, 棚卸名など）を使い、内部ID（`purchase_1770257346054_3pg6dtwb` などの複雑な英数字）は使わない。
- ファイル名に使えない文字（`\ / : * ? " < > |` およびスペース）のみ `_` に置換する。`#` や数字はそのまま残す。

---

## 画面別

| 画面 | 出力元 | ファイル名 |
|------|--------|------------|
| **入出庫** | 一覧 | `入出庫履歴_YYYY-MM-DD.csv` |
| **入出庫** | モーダル | `入出庫履歴_名称_YYYY-MM-DD.csv`（name または id の表示用） |
| **ロス** | 一覧 | `ロス履歴_YYYY-MM-DD.csv` |
| **ロス** | モーダル | `ロス履歴_名称_YYYY-MM-DD.csv`（#L0001 等） |
| **棚卸** | テンプレートDL | `商品グループ_テンプレート.csv` |
| **棚卸** | 登録済みDL | `商品グループ_登録済み.csv` |
| **棚卸** | 履歴一覧 | `棚卸履歴_YYYY-MM-DD.csv` |
| **棚卸** | 履歴モーダル | `棚卸履歴_名称_YYYY-MM-DD.csv`（countName 等） |
| **発注** | モーダル | `発注_名称_YYYY-MM-DD.csv`（orderName 等） |
| **仕入** | 一覧 | `仕入履歴_YYYY-MM-DD.csv` |
| **仕入** | モーダル | `仕入履歴_名称_YYYY-MM-DD.csv`（#P0000, #B0000 等） |

---

## 実装ファイル

- 入出庫: `app/routes/app.history.tsx`
- ロス: `app/routes/app.loss.tsx`
- 棚卸: `app/routes/app.inventory-count.tsx`
- 発注: `app/routes/app.order.tsx`
- 仕入: `app/routes/app.purchase.tsx`

名称のサニタイズは各所で `String(表示名).replace(/[\\/:*?"<>|\s]/g, "_").trim() || "item"` を使用。
