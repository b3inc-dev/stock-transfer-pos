# POS タイル「このバージョンのPOSではサポートされていません」の対処

**作成日**: 2026年2月

## 症状

- **発注・入庫・棚卸**のタイルをタップすると **「不明なタイル」** または **「この操作は、このバージョンのPOSではサポートされていません」** と表示される。
- **出庫・ロス・仕入**は同じ 2026-01 でカメラスキャンも含めて問題なく動いている。

## 要因について（api_version ではない）

- 出庫・ロス・仕入が 2026-01 で動いているため、**api_version が原因ではない**と判断。
- 考えられる別要因の例:
  - **デプロイ先アプリのずれ**: URL 変更後に `shopify app deploy` を実行したとき、**公開用（POS Stock）** と **自社用（POS Stock - Ciara）** のどちらに拡張がデプロイされたか。POS で開いているアプリと、拡張が登録されているアプリが一致していないと、一部のタイルだけ「不明」になることがある。
  - **拡張のバージョン・キャッシュ**: デプロイ後に POS が古い拡張バージョンを参照したままになっている（POS アプリの完全終了・再起動や、ストアのアプリ再インストールで解消することがある）。
  - **拡張ごとの登録状態**: 発注・入庫・棚卸だけ Dev Dashboard 上で無効や未リリースの状態になっていないか。

## 確認するとよいこと

1. POS で開いているアプリが **「POS Stock」**（公開用）か **「POS Stock - Ciara」**（自社用）か確認する。URL 変更後は公開用の App URL が pos-stock.onrender.com になっているので、どちらのアプリで開いているかで読み込まれる拡張が変わる。
2. **Dev Dashboard → POS Stock（または該当アプリ）→ 拡張** で、発注・入庫・棚卸の拡張が「リリース済み」で含まれているか確認する。
3. 公開用でデプロイした場合は `shopify app config use public` のあと `shopify app deploy` を実行し、自社用で使う場合は自社用 toml でデプロイする。**POS で使うアプリと、いまデプロイしているアプリを一致させる**。
4. POS アプリを完全に終了してから起動し直し、タイルを再度試す。
